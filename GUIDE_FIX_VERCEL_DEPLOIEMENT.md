# Guide: R√©soudre le probl√®me de d√©ploiement Vercel

## üéØ Probl√®me identifi√©
Vercel est connect√© √† GitHub mais ne d√©clenche aucun d√©ploiement car il ne sait pas o√π trouver le code source React (qui est dans le sous-dossier `frontend/`).

## ‚úÖ Solutions appliqu√©es

### 1. Fichier vercel.json d√©plac√© et configur√©
- ‚úÖ D√©plac√© de `/vercel.json` ‚Üí `/frontend/vercel.json`
- ‚úÖ Ajout des commandes de build pour Create React App

## üîß Configuration requise dans Vercel Dashboard

### √âtape 1: Configurer le Root Directory
1. Allez sur **Vercel Dashboard** ‚Üí Votre projet `profiremanager`
2. Cliquez sur **Settings** (en haut √† droite)
3. Dans le menu lat√©ral, cliquez sur **General**
4. Trouvez la section **"Build & Development Settings"**
5. Configurez les param√®tres suivants:

```
Root Directory: frontend
   ‚îî‚îÄ Cliquez sur "Edit" et entrez: frontend
   ‚îî‚îÄ Cochez "Include source files outside of the Root Directory in the Build Step"

Build Command: yarn build
Install Command: yarn install
Output Directory: build
```

6. Cliquez sur **"Save"** pour chaque param√®tre modifi√©

### √âtape 2: Configurer les variables d'environnement
1. Toujours dans **Settings**, allez dans **"Environment Variables"**
2. Ajoutez la variable suivante:

```
Name: REACT_APP_BACKEND_URL
Value: https://profiremanager-backend.onrender.com
Environment: Production, Preview
```

3. Cliquez sur **"Save"**

### √âtape 3: D√©clencher un nouveau d√©ploiement

**M√©thode A: Via push Git** (Recommand√©)
```bash
# Sur votre machine locale ou depuis cette session
cd /app
git add .
git commit -m "fix: configure vercel for frontend subfolder"
git push origin main
```

**M√©thode B: Via Vercel Dashboard**
1. Allez dans l'onglet **"Deployments"**
2. Cliquez sur le bouton **"Redeploy"** (ou les 3 points "..." sur le dernier d√©ploiement)
3. S√©lectionnez **"Redeploy with existing Build Cache"**

**M√©thode C: Via un commit vide (forcer)**
```bash
git commit --allow-empty -m "trigger vercel deployment"
git push origin main
```

## üìã Checklist de v√©rification

Avant de d√©clencher le d√©ploiement, v√©rifiez:

- [ ] Root Directory configur√© √† `frontend` dans Vercel
- [ ] Build Command = `yarn build`
- [ ] Output Directory = `build`
- [ ] Variable d'environnement `REACT_APP_BACKEND_URL` configur√©e
- [ ] Code pouss√© sur GitHub (branche `main`)
- [ ] Vercel connect√© au bon d√©p√¥t GitHub

## üöÄ Prochaines √©tapes

1. Suivre les √©tapes 1 et 2 ci-dessus dans Vercel Dashboard
2. Pousser le code mis √† jour sur GitHub
3. Vercel devrait automatiquement d√©tecter le push et d√©marrer le build
4. Le d√©ploiement prendra ~2-5 minutes

## üîç V√©rification du d√©ploiement

Une fois le d√©ploiement lanc√©, vous verrez:
- Dans Vercel Dashboard ‚Üí Deployments: Un nouveau build en cours (ic√¥ne tournante)
- Le statut changera de "Building" ‚Üí "Deploying" ‚Üí "Ready"
- Le bouton "Visit" deviendra actif

## ‚ö†Ô∏è Probl√®mes courants

### Si le build √©choue avec une erreur de d√©pendances:
```bash
# Dans les param√®tres Vercel, changez Node.js Version:
Node.js Version: 18.x (recommand√©) ou 20.x
```

### Si le build r√©ussit mais l'app ne charge pas:
- V√©rifiez que `REACT_APP_BACKEND_URL` est bien configur√©
- V√©rifiez les logs du navigateur (F12 ‚Üí Console)
- V√©rifiez que votre backend Render est bien en ligne

## üìû Besoin d'aide?

Si apr√®s ces √©tapes, le d√©ploiement ne se d√©clenche toujours pas:
1. Partagez une capture d'√©cran des "Build & Development Settings" dans Vercel
2. Partagez une capture d'√©cran de l'onglet "Deployments"
3. V√©rifiez les webhooks GitHub: Settings ‚Üí Webhooks (devrait y avoir un webhook Vercel actif)
